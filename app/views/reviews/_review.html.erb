<div class="bg-cinematico-dark border border-gray-800 rounded-lg p-6 shadow-md transition hover:border-gray-600" id="review_<%= review.id %>">
  <div class="flex justify-between items-start gap-4">
    <div class="flex-1">
      <div class="flex items-center gap-3 mb-2">
        <h4 class="font-bold text-cinematico-light"><%= review.user.username || review.user.email.split('@').first %></h4>
        <span class="px-2 py-0.5 bg-yellow-900/30 text-cinematico-gold text-sm font-bold rounded border border-yellow-900/50">â˜… <%= review.rating %></span>
      </div>
      <p class="text-xs text-cinematico-grey mb-4"><%= time_ago_in_words(review.created_at) %> ago</p>
      
      <div class="text-gray-300 whitespace-pre-line leading-relaxed"><%= review.body %></div>
    </div>
    
    <div class="flex flex-col items-center bg-black/40 rounded-full py-2 px-1 border border-gray-800">
      <%= button_to vote_review_path(review, value: 1), method: :post, class: "text-gray-500 hover:text-cinematico-gold p-1 bg-transparent border-0 cursor-pointer" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
        </svg>
      <% end %>
      
      <span class="font-bold my-1 text-sm <%= review.score > 0 ? 'text-cinematico-gold' : (review.score < 0 ? 'text-red-500' : 'text-gray-500') %>">
        <%= review.score %>
      </span>

      <%= button_to vote_review_path(review, value: -1), method: :post, class: "text-gray-500 hover:text-red-500 p-1 bg-transparent border-0 cursor-pointer" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      <% end %>
    </div>
  </div>

  <div class="mt-4 pt-4 border-t border-gray-800 flex gap-4 text-sm">
    <% if user_signed_in? %>
      <% if review.user == current_user %>
        <%= link_to "Edit", edit_review_path(review, movie_id: review.movie.id), class: "text-cinematico-gold hover:underline" %>
        <%= button_to "Delete", movie_review_path(review.movie, review), method: :delete, data: { confirm: "Are you sure?" }, class: "text-red-500 hover:text-red-400 bg-transparent border-0 cursor-pointer p-0 font-inherit" %>
      <% else %>
        <% if review.reported? %>
           <span class="text-red-500 italic text-xs flex items-center gap-1">
             <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
             Flagged for Moderation
           </span>
        <% else %>
          <%= button_to "Report", report_review_path(review), method: :post, class: "text-cinematico-grey hover:text-red-500 bg-transparent border-0 cursor-pointer p-0 font-inherit", data: { confirm: "Report this review as inappropriate?" } %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>